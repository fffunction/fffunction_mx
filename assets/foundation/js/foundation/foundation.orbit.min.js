(function(t,e,s,i){"use strict";Foundation.libs=Foundation.libs||{};Foundation.libs.orbit={name:"orbit",version:"4.1.0",settings:{timer_speed:1e4,animation_speed:500,bullets:true,stack_on_small:true,navigation_arrows:true,slide_number:true,container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning"},init:function(e,s,i){var n=this;Foundation.inherit(n,"data_options");if(typeof s==="object"){t.extend(true,n.settings,s)}t("[data-orbit]",e).each(function(e,s){var i=t.extend(true,{},n);i._init(e,s)})},_container_html:function(){var t=this;return'<div class="'+t.settings.container_class+'"></div>'},_bullets_container_html:function(e){var s=this,i=t('<ol class="'+s.settings.bullets_container_class+'"></ol>');e.each(function(e,n){var r=t('<li data-orbit-slide-number="'+(e+1)+'" class=""></li>');if(e===0){r.addClass(s.settings.bullets_active_class)}i.append(r)});return i},_slide_number_html:function(e,s){var i=this,n=t('<div class="'+i.settings.slide_number_class+'"></div>');n.append("<span>"+e+"</span> of <span>"+s+"</span>");return n},_timer_html:function(){var t=this;if(typeof t.settings.timer_speed==="number"&&t.settings.timer_speed>0){return'<div class="'+t.settings.timer_container_class+'"><span></span><div class="'+t.settings.timer_progress_class+'"></div></div>'}else{return""}},_next_html:function(){var t=this;return'<a href="#" class="'+t.settings.next_class+'">Next <span></span></a>'},_prev_html:function(){var t=this;return'<a href="#" class="'+t.settings.prev_class+'">Prev <span></span></a>'},_init:function(e,s){var i=this,n=t(s),r=n.wrap(i._container_html()).parent(),a=n.children();t.extend(true,i.settings,i.data_options(n));if(i.settings.navigation_arrows){r.append(i._prev_html());r.append(i._next_html())}n.addClass(i.settings.slides_container_class);if(i.settings.stack_on_small){r.addClass(i.settings.stack_on_small_class)}if(i.settings.slide_number){r.append(i._slide_number_html(1,a.length))}r.append(i._timer_html());if(i.settings.bullets){r.after(i._bullets_container_html(a))}n.append(a.first().clone().attr("data-orbit-slide",""));n.prepend(a.last().clone().attr("data-orbit-slide",""));n.css(Foundation.rtl?"marginRight":"marginLeft","-100%");a.first().addClass(i.settings.active_slide_class);i._init_events(n);i._init_dimensions(n);i._start_timer(n)},_init_events:function(n){var r=this,a=n.parent();t(e).on("load.fndtn.orbit",function(){n.height("");n.height(n.height(a.height()));n.trigger("orbit:ready")}).on("resize.fndtn.orbit",function(){n.height("");n.height(n.height(a.height()))});t(s).on("click.fndtn.orbit","[data-orbit-link]",function(e){e.preventDefault();var s=t(e.currentTarget).attr("data-orbit-link"),i=n.find("[data-orbit-slide="+s+"]").first();if(i.length===1){r._reset_timer(n,true);r._goto(n,i.index(),function(){})}});a.siblings("."+r.settings.bullets_container_class).on("click.fndtn.orbit","[data-orbit-slide-number]",function(e){e.preventDefault();r._reset_timer(n,true);r._goto(n,t(e.currentTarget).data("orbit-slide-number"),function(){})});a.on("orbit:after-slide-change.fndtn.orbit",function(t,e){var s=a.find("."+r.settings.slide_number_class);if(s.length===1){s.replaceWith(r._slide_number_html(e.slide_number,e.total_slides))}}).on("orbit:next-slide.fndtn.orbit click.fndtn.orbit","."+r.settings.next_class,function(t){t.preventDefault();r._reset_timer(n,true);r._goto(n,"next",function(){})}).on("orbit:prev-slide.fndtn.orbit click.fndtn.orbit","."+r.settings.prev_class,function(t){t.preventDefault();r._reset_timer(n,true);r._goto(n,"prev",function(){})}).on("orbit:toggle-play-pause.fndtn.orbit click.fndtn.orbit touchstart.fndtn.orbit","."+r.settings.timer_container_class,function(e){e.preventDefault();var s=t(e.currentTarget).toggleClass(r.settings.timer_paused_class),i=s.closest("."+r.settings.container_class).find("."+r.settings.slides_container_class);if(s.hasClass(r.settings.timer_paused_class)){r._stop_timer(i)}else{r._start_timer(i)}}).on("touchstart.fndtn.orbit",function(t){if(!t.touches){t=t.originalEvent}var e={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:i};a.data("swipe-transition",e);t.stopPropagation()}).on("touchmove.fndtn.orbit",function(t){if(!t.touches){t=t.originalEvent}if(t.touches.length>1||t.scale&&t.scale!==1)return;var e=a.data("swipe-transition");if(typeof e==="undefined"){e={}}e.delta_x=t.touches[0].pageX-e.start_page_x;if(typeof e.is_scrolling==="undefined"){e.is_scrolling=!!(e.is_scrolling||Math.abs(e.delta_x)<Math.abs(t.touches[0].pageY-e.start_page_y))}if(!e.is_scrolling&&!e.active){t.preventDefault();r._stop_timer(n);var s=e.delta_x<0?"next":"prev";e.active=true;r._goto(n,s,function(){})}}).on("touchend.fndtn.orbit",function(t){a.data("swipe-transition",{});t.stopPropagation()})},_init_dimensions:function(t){var e=t.parent(),s=t.children();t.css("width",s.length*100+"%");s.css("width",100/s.length+"%");t.height(e.height());t.css("width",s.length*100+"%")},_start_timer:function(t){var e=this,s=t.parent();var i=function(){e._reset_timer(t,false);e._goto(t,"next",function(){e._start_timer(t)})};var n=s.find("."+e.settings.timer_container_class),r=n.find("."+e.settings.timer_progress_class),a=r.width()/n.width(),l=e.settings.timer_speed-a*e.settings.timer_speed;r.animate({width:"100%"},l,"linear",i);t.trigger("orbit:timer-started")},_stop_timer:function(t){var e=this,s=t.parent(),i=s.find("."+e.settings.timer_container_class),n=i.find("."+e.settings.timer_progress_class),r=n.width()/i.width();e._rebuild_timer(s,r*100+"%");t.trigger("orbit:timer-stopped");i=s.find("."+e.settings.timer_container_class);i.addClass(e.settings.timer_paused_class)},_reset_timer:function(t,e){var s=this,i=t.parent();s._rebuild_timer(i,"0%");if(typeof e==="boolean"&&e){var n=i.find("."+s.settings.timer_container_class);n.addClass(s.settings.timer_paused_class)}},_rebuild_timer:function(e,s){var i=this,n=e.find("."+i.settings.timer_container_class),r=t(i._timer_html()),a=r.find("."+i.settings.timer_progress_class);if(typeof Zepto==="function"){n.remove();e.append(r);a.css("width",s)}else if(typeof jQuery==="function"){var l=n.find("."+i.settings.timer_progress_class);l.css("width",s);l.stop()}},_goto:function(e,s,i){var n=this,r=e.parent(),a=e.children(),l=e.find("."+n.settings.active_slide_class),o=l.index(),_=Foundation.rtl?"marginRight":"marginLeft";if(r.hasClass(n.settings.orbit_transition_class)){return false}if(s==="prev"){if(o===0){o=a.length-1}else{o--}}else if(s==="next"){o=(o+1)%a.length}else if(typeof s==="number"){o=s%a.length}if(o===a.length-1&&s==="next"){e.css(_,"0%");o=1}else if(o===0&&s==="prev"){e.css(_,"-"+(a.length-1)*100+"%");o=a.length-2}r.addClass(n.settings.orbit_transition_class);l.removeClass(n.settings.active_slide_class);t(a[o]).addClass(n.settings.active_slide_class);var c=r.siblings("."+n.settings.bullets_container_class);if(c.length===1){c.children().removeClass(n.settings.bullets_active_class);t(c.children()[o-1]).addClass(n.settings.bullets_active_class)}var d="-"+o*100+"%";e.trigger("orbit:before-slide-change");if(e.css(_)===d){r.removeClass(n.settings.orbit_transition_class);e.trigger("orbit:after-slide-change",[{slide_number:o,total_slides:e.children().length-2}]);i()}else{var g={};g[_]=d;e.animate(g,n.settings.animation_speed,"linear",function(){r.removeClass(n.settings.orbit_transition_class);e.trigger("orbit:after-slide-change",[{slide_number:o,total_slides:e.children().length-2}]);i()})}}}})(Foundation.zj,this,this.document);