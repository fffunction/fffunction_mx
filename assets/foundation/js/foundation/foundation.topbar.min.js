(function(t,e,s,i){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.2.0",settings:{index:0,stickyClass:"sticky",custom_back_text:true,back_text:"Back",is_hover:true,scrolltop:true,init:false},init:function(s,i,a){Foundation.inherit(this,"data_options");var n=this;if(typeof i==="object"){t.extend(true,this.settings,i)}else if(typeof a!=="undefined"){t.extend(true,this.settings,a)}if(typeof i!="string"){t(".top-bar, [data-topbar]").each(function(){t.extend(true,n.settings,n.data_options(t(this)));n.settings.$w=t(e);n.settings.$topbar=t(this);n.settings.$section=n.settings.$topbar.find("section");n.settings.$titlebar=n.settings.$topbar.children("ul").first();n.settings.$topbar.data("index",0);var s=t("<div class='top-bar-js-breakpoint'/>").insertAfter(n.settings.$topbar);n.settings.breakPoint=s.width();s.remove();n.assemble();if(n.settings.$topbar.parent().hasClass("fixed")){t("body").css("padding-top",n.outerHeight(n.settings.$topbar))}});if(!n.settings.init){this.events()}return this.settings.init}else{return this[i].call(this,a)}},events:function(){var s=this;var i=this.outerHeight(t(".top-bar, [data-topbar]"));t(this.scope).on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(a){var n=t(this).closest(".top-bar, [data-topbar]"),o=n.find("section, .section"),r=n.children("ul").first();a.preventDefault();if(s.breakpoint()){if(!s.rtl){o.css({left:"0%"});o.find(">.name").css({left:"100%"})}else{o.css({right:"0%"});o.find(">.name").css({right:"100%"})}o.find("li.moved").removeClass("moved");n.data("index",0);n.toggleClass("expanded").css("min-height","")}if(!n.hasClass("expanded")){if(n.hasClass("fixed")){n.parent().addClass("fixed");n.removeClass("fixed");t("body").css("padding-top",i)}}else if(n.parent().hasClass("fixed")){n.parent().removeClass("fixed");n.addClass("fixed");t("body").css("padding-top","0");if(s.settings.scrolltop){e.scrollTo(0,0)}}}).on("mouseenter mouseleave",".top-bar li",function(e){if(!s.settings.is_hover)return;if(/enter|over/i.test(e.type)){t(this).addClass("hover")}else{t(this).removeClass("hover")}}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(e){if(s.breakpoint())return;var i=t(this),a=t(e.target),n=i.closest("[data-topbar], .top-bar"),o=n.data("topbar");if(s.settings.is_hover&&!Modernizr.touch)return;e.stopImmediatePropagation();if(a[0].nodeName==="A"&&a.parent().hasClass("has-dropdown")){e.preventDefault()}if(i.hasClass("hover")){i.removeClass("hover").find("li").removeClass("hover")}else{i.addClass("hover")}}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(e){if(s.breakpoint()){e.preventDefault();var i=t(this),a=i.closest(".top-bar, [data-topbar]"),n=a.find("section, .section"),o=a.children("ul").first(),r=i.next(".dropdown").outerHeight(),d=i.closest("li");a.data("index",a.data("index")+1);d.addClass("moved");if(!s.rtl){n.css({left:-(100*a.data("index"))+"%"});n.find(">.name").css({left:100*a.data("index")+"%"})}else{n.css({right:-(100*a.data("index"))+"%"});n.find(">.name").css({right:100*a.data("index")+"%"})}a.css("min-height",s.height(i.siblings("ul"))+s.outerHeight(o,true))}});t(e).on("resize.fndtn.topbar",function(){if(!s.breakpoint()){t(".top-bar, [data-topbar]").css("min-height","").removeClass("expanded").find("li").removeClass("hover")}}.bind(this));t("body").on("click.fndtn.topbar",function(e){var s=t(e.target).closest("[data-topbar], .top-bar");if(s.length>0){return}t(".top-bar li, [data-topbar] li").removeClass("hover")});t(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(e){e.preventDefault();var i=t(this),a=i.closest(".top-bar, [data-topbar]"),n=a.children("ul").first(),o=a.find("section, .section"),r=i.closest("li.moved"),d=r.parent();a.data("index",a.data("index")-1);if(!s.rtl){o.css({left:-(100*a.data("index"))+"%"});o.find(">.name").css({left:100*a.data("index")+"%"})}else{o.css({right:-(100*a.data("index"))+"%"});o.find(">.name").css({right:100*a.data("index")+"%"})}if(a.data("index")===0){a.css("min-height",0)}else{a.css("min-height",s.height(d)+s.outerHeight(n,true))}setTimeout(function(){r.removeClass("moved")},300)})},breakpoint:function(){return t(e).width()<=this.settings.breakPoint||t("html").hasClass("lt-ie9")},assemble:function(){var e=this;this.settings.$section.detach();this.settings.$section.find(".has-dropdown>a").each(function(){var s=t(this),i=s.siblings(".dropdown"),a=s.attr("href");if(a&&a.length>1){var n=t('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+a+'">'+s.text()+"</a></li>")}else{var n=t('<li class="title back js-generated"><h5><a href="#"></a></h5></li>')}if(e.settings.custom_back_text==true){n.find("h5>a").html("&laquo; "+e.settings.back_text)}else{n.find("h5>a").html("&laquo; "+s.html())}i.prepend(n)});this.settings.$section.appendTo(this.settings.$topbar);this.sticky()},height:function(e){var s=0,i=this;e.find("> li").each(function(){s+=i.outerHeight(t(this),true)});return s},sticky:function(){var s="."+this.settings.stickyClass;if(t(s).length>0){var i=t(s).length?t(s).offset().top:0,a=t(e);var n=this.outerHeight(t(".top-bar"));a.scroll(function(){if(a.scrollTop()>=i){t(s).addClass("fixed");t("body").css("padding-top",n)}else if(a.scrollTop()<i){t(s).removeClass("fixed");t("body").css("padding-top","0")}})}},off:function(){t(this.scope).off(".fndtn.topbar");t(e).off(".fndtn.topbar")}}})(Foundation.zj,this,this.document);