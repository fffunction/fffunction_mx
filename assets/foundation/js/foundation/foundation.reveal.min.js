(function(e,t,s,i){"use strict";Foundation.libs.reveal={name:"reveal",version:"4.2.0",locked:false,settings:{animation:"fadeAndPop",animationSpeed:250,closeOnBackgroundClick:true,closeOnEsc:true,dismissModalClass:"close-reveal-modal",bgClass:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:e(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(t,s,i){Foundation.inherit(this,"data_options delay");if(typeof s==="object"){e.extend(true,this.settings,s)}else if(typeof i!=="undefined"){e.extend(true,this.settings,i)}if(typeof s!="string"){this.events();return this.settings.init}else{return this[s].call(this,i)}},events:function(){var t=this;e(this.scope).off(".fndtn.reveal").on("click.fndtn.reveal","[data-reveal-id]",function(s){s.preventDefault();if(!t.locked){var i=e(this),n=i.data("reveal-ajax");t.locked=true;if(typeof n==="undefined"){t.open.call(t,i)}else{var o=n===true?i.attr("href"):n;t.open.call(t,i,{url:o})}}}).on("click.fndtn.reveal touchend.click.fndtn.reveal",this.close_targets(),function(s){s.preventDefault();if(!t.locked){var i=e.extend({},t.settings,t.data_options(e(".reveal-modal.open")));if(e(s.target)[0]===e("."+i.bgClass)[0]&&!i.closeOnBackgroundClick){return}t.locked=true;t.close.call(t,e(this).closest(".reveal-modal"))}}).on("open.fndtn.reveal",".reveal-modal",this.settings.open).on("opened.fndtn.reveal",".reveal-modal",this.settings.opened).on("opened.fndtn.reveal",".reveal-modal",this.open_video).on("close.fndtn.reveal",".reveal-modal",this.settings.close).on("closed.fndtn.reveal",".reveal-modal",this.settings.closed).on("closed.fndtn.reveal",".reveal-modal",this.close_video);e("body").bind("keyup.reveal",function(s){var i=e(".reveal-modal.open"),n=e.extend({},t.settings,t.data_options(i));if(s.which===27&&n.closeOnEsc){i.foundation("reveal","close")}});return true},open:function(t,s){if(t){if(typeof t.selector!=="undefined"){var i=e("#"+t.data("reveal-id"))}else{var i=e(this.scope);s=t}}else{var i=e(this.scope)}if(!i.hasClass("open")){var n=e(".reveal-modal.open");if(typeof i.data("css-top")==="undefined"){i.data("css-top",parseInt(i.css("top"),10)).data("offset",this.cache_offset(i))}i.trigger("open");if(n.length<1){this.toggle_bg(i)}if(typeof s==="undefined"||!s.url){this.hide(n,this.settings.css.close);this.show(i,this.settings.css.open)}else{var o=this,a=typeof s.success!=="undefined"?s.success:null;e.extend(s,{success:function(t,s,l){if(e.isFunction(a)){a(t,s,l)}i.html(t);e(i).foundation("section","reflow");o.hide(n,o.settings.css.close);o.show(i,o.settings.css.open)}});e.ajax(s)}}},close:function(t){var t=t||e(this.scope),s=e(".reveal-modal.open");if(s.length>0){this.locked=true;t.trigger("close");this.toggle_bg(t);this.hide(s,this.settings.css.close)}},close_targets:function(){var e="."+this.settings.dismissModalClass;if(this.settings.closeOnBackgroundClick){return e+", ."+this.settings.bgClass}return e},toggle_bg:function(t){if(e(".reveal-modal-bg").length===0){this.settings.bg=e("<div />",{"class":this.settings.bgClass}).appendTo("body")}if(this.settings.bg.filter(":visible").length>0){this.hide(this.settings.bg)}else{this.show(this.settings.bg)}},show:function(s,i){if(i){if(/pop/i.test(this.settings.animation)){i.top=e(t).scrollTop()-s.data("offset")+"px";var n={top:e(t).scrollTop()+s.data("css-top")+"px",opacity:1};return this.delay(function(){return s.css(i).animate(n,this.settings.animationSpeed,"linear",function(){this.locked=false;s.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var n={opacity:1};return this.delay(function(){return s.css(i).animate(n,this.settings.animationSpeed,"linear",function(){this.locked=false;s.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}return s.css(i).show().css({opacity:1}).addClass("open").trigger("opened")}if(/fade/i.test(this.settings.animation)){return s.fadeIn(this.settings.animationSpeed/2)}return s.show()},hide:function(s,i){if(i){if(/pop/i.test(this.settings.animation)){var n={top:-e(t).scrollTop()-s.data("offset")+"px",opacity:0};return this.delay(function(){return s.animate(n,this.settings.animationSpeed,"linear",function(){this.locked=false;s.css(i).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var n={opacity:0};return this.delay(function(){return s.animate(n,this.settings.animationSpeed,"linear",function(){this.locked=false;s.css(i).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}return s.hide().css(i).removeClass("open").trigger("closed")}if(/fade/i.test(this.settings.animation)){return s.fadeOut(this.settings.animationSpeed/2)}return s.hide()},close_video:function(t){var s=e(this).find(".flex-video"),i=s.find("iframe");if(i.length>0){i.attr("data-src",i[0].src);i.attr("src","about:blank");s.hide()}},open_video:function(t){var s=e(this).find(".flex-video"),n=s.find("iframe");if(n.length>0){var o=n.attr("data-src");if(typeof o==="string"){n[0].src=n.attr("data-src")}else{var a=n[0].src;n[0].src=i;n[0].src=a}s.show()}},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10);e.hide();return t},off:function(){e(this.scope).off(".fndtn.reveal")}}})(Foundation.zj,this,this.document);